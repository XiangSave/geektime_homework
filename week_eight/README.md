# 第八周
1、使用 redis benchmark 工具, 测试 10 20 50 100 200 1k 5k 字节 value 大小，redis get set 性能。
2、写入一定量的 kv 数据, 根据数据大小 1w-50w 自己评估, 结合写入前后的 info memory 信息  , 分析上述不同 value 大小下，平均每个 key 的占用内存空间。

# redis 压测
+ 30连接、6 线程、SET、60s、10字节

```bash
$ memtier_benchmark -s 127.0.0.1 -c 30 -d 10  --threads=6 --ratio=1:0 --test-time=60 -p 6378
ALL STATS
============================================================================================================================
Type         Ops/sec     Hits/sec   Misses/sec    Avg. Latency     p50 Latency     p99 Latency    p100 Latency       KB/sec
----------------------------------------------------------------------------------------------------------------------------
Sets       170103.49          ---          ---         1.05780         1.03100         1.42300         3.05500      9449.92
Gets            0.00         0.00         0.00             ---             ---             ---             ---         0.00
Waits           0.00          ---          ---             ---             ---             ---             ---          ---
Totals     170103.49         0.00         0.00         1.05780         1.03100         1.42300         3.05500      9449.92

$ memtier_benchmark -s 127.0.0.1 -c 30 -d 10  --threads=6 --ratio=0:1 --test-time=60 -p 6378
ALL STATS
============================================================================================================================
Type         Ops/sec     Hits/sec   Misses/sec    Avg. Latency     p50 Latency     p99 Latency    p100 Latency       KB/sec
----------------------------------------------------------------------------------------------------------------------------
Sets            0.00          ---          ---             ---             ---             ---             ---         0.00
Gets       142381.38    142381.38         0.00         1.26396         1.23900         1.67100         3.37500    718009.28
Waits           0.00          ---          ---             ---             ---             ---             ---          ---
Totals     142381.38    142381.38         0.00         1.26396         1.23900         1.67100         3.37500    718009.28
```
+ 30连接、6 线程、SET、60s、20字节

```bash
$ memtier_benchmark -s 127.0.0.1 -c 30 -d 20  --threads=6 --ratio=1:0 --test-time=60 -p 6378
ALL STATS
============================================================================================================================
Type         Ops/sec     Hits/sec   Misses/sec    Avg. Latency     p50 Latency     p99 Latency    p100 Latency       KB/sec
----------------------------------------------------------------------------------------------------------------------------
Sets       171555.18          ---          ---         1.04887         1.03100         1.38300         2.92700     11205.95
Gets            0.00         0.00         0.00             ---             ---             ---             ---         0.00
Waits           0.00          ---          ---             ---             ---             ---             ---          ---
Totals     171555.18         0.00         0.00         1.04887         1.03100         1.38300         2.92700     11205.95

$ memtier_benchmark -s 127.0.0.1 -c 30 -d 20  --threads=6 --ratio=0:1 --test-time=60 -p 6378
ALL STATS
============================================================================================================================
Type         Ops/sec     Hits/sec   Misses/sec    Avg. Latency     p50 Latency     p99 Latency    p100 Latency       KB/sec
----------------------------------------------------------------------------------------------------------------------------
Sets            0.00          ---          ---             ---             ---             ---             ---         0.00
Gets       140843.16    140843.16         0.00         1.27774         1.25500         1.68700         3.34300    710252.23
Waits           0.00          ---          ---             ---             ---             ---             ---          ---
Totals     140843.16    140843.16         0.00         1.27774         1.25500         1.68700         3.34300    710252.23
```

+ 30连接、6 线程、SET、60s、20字节

```bash
$ memtier_benchmark -s 127.0.0.1 -c 30 -d 50  --threads=6 --ratio=1:0 --test-time=60 -p 6378
ALL STATS
============================================================================================================================
Type         Ops/sec     Hits/sec   Misses/sec    Avg. Latency     p50 Latency     p99 Latency    p100 Latency       KB/sec
----------------------------------------------------------------------------------------------------------------------------
Sets       167940.30          ---          ---         1.07140         1.04700         1.43900         2.99100     15889.94
Gets            0.00         0.00         0.00             ---             ---             ---             ---         0.00
Waits           0.00          ---          ---             ---             ---             ---             ---          ---
Totals     167940.30         0.00         0.00         1.07140         1.04700         1.43900         2.99100     15889.94

$ memtier_benchmark -s 127.0.0.1 -c 30 -d 50  --threads=6 --ratio=0:1 --test-time=60 -p 6378
ALL STATS
============================================================================================================================
Type         Ops/sec     Hits/sec   Misses/sec    Avg. Latency     p50 Latency     p99 Latency    p100 Latency       KB/sec
----------------------------------------------------------------------------------------------------------------------------
Sets            0.00          ---          ---             ---             ---             ---             ---         0.00
Gets       142768.94    142768.94         0.00         1.26055         1.23100         1.66300         3.42300    719963.68
Waits           0.00          ---          ---             ---             ---             ---             ---          ---
Totals     142768.94    142768.94         0.00         1.26055         1.23100         1.66300         3.42300    719963.68
```

+ 30连接、6 线程、SET、60s、100字节

```bash
$ memtier_benchmark -s 127.0.0.1 -c 30 -d 100  --threads=6 --ratio=1:0 --test-time=60 -p 6378
ALL STATS
============================================================================================================================
Type         Ops/sec     Hits/sec   Misses/sec    Avg. Latency     p50 Latency     p99 Latency    p100 Latency       KB/sec
----------------------------------------------------------------------------------------------------------------------------
Sets       167553.47          ---          ---         1.07383         1.05500         1.44700         2.89500     24198.27
Gets            0.00         0.00         0.00             ---             ---             ---             ---         0.00
Waits           0.00          ---          ---             ---             ---             ---             ---          ---
Totals     167553.47         0.00         0.00         1.07383         1.05500         1.44700         2.89500     24198.27

$ memtier_benchmark -s 127.0.0.1 -c 30 -d 100  --threads=6 --ratio=0:1 --test-time=60 -p 6378
ALL STATS
============================================================================================================================
Type         Ops/sec     Hits/sec   Misses/sec    Avg. Latency     p50 Latency     p99 Latency    p100 Latency       KB/sec
----------------------------------------------------------------------------------------------------------------------------
Sets            0.00          ---          ---             ---             ---             ---             ---         0.00
Gets       140758.63    140758.63         0.00         1.27855         1.24700         1.68700         3.39100    709825.98
Waits           0.00          ---          ---             ---             ---             ---             ---          ---
Totals     140758.63    140758.63         0.00         1.27855         1.24700         1.68700         3.39100    709825.98
```

+ 30连接、6 线程、60s、200字节

```bash
$ memtier_benchmark -s 127.0.0.1 -c 30 -d 200  --threads=6 --ratio=1:0 --test-time=60 -p 6378
ALL STATS
============================================================================================================================
Type         Ops/sec     Hits/sec   Misses/sec    Avg. Latency     p50 Latency     p99 Latency    p100 Latency       KB/sec
----------------------------------------------------------------------------------------------------------------------------
Sets       166921.16          ---          ---         1.07795         1.05500         1.45500         3.15100     40407.83
Gets            0.00         0.00         0.00             ---             ---             ---             ---         0.00
Waits           0.00          ---          ---             ---             ---             ---             ---          ---
Totals     166921.16         0.00         0.00         1.07795         1.05500         1.45500         3.15100     40407.83

$ memtier_benchmark -s 127.0.0.1 -c 30 -d 200  --threads=6 --ratio=0:1 --test-time=60 -p 6378
ALL STATS
============================================================================================================================
Type         Ops/sec     Hits/sec   Misses/sec    Avg. Latency     p50 Latency     p99 Latency    p100 Latency       KB/sec
----------------------------------------------------------------------------------------------------------------------------
Sets            0.00          ---          ---             ---             ---             ---             ---         0.00
Gets       141149.93    141149.93         0.00         1.27498         1.24700         1.69500         3.47100    711799.26
Waits           0.00          ---          ---             ---             ---             ---             ---          ---
Totals     141149.93    141149.93         0.00         1.27498         1.24700         1.69500         3.47100    711799.26
```

+ 30连接、6 线程、60s、1024字节

```bash
$ memtier_benchmark -s 127.0.0.1 -c 30 -d 1024  --threads=6 --ratio=1:0 --test-time=60 -p 6378
ALL STATS
============================================================================================================================
Type         Ops/sec     Hits/sec   Misses/sec    Avg. Latency     p50 Latency     p99 Latency    p100 Latency       KB/sec
----------------------------------------------------------------------------------------------------------------------------
Sets       162754.26          ---          ---         1.10553         1.08700         1.49500         3.02300    170524.38
Gets            0.00         0.00         0.00             ---             ---             ---             ---         0.00
Waits           0.00          ---          ---             ---             ---             ---             ---          ---
Totals     162754.26         0.00         0.00         1.10553         1.08700         1.49500         3.02300    170524.38

$ memtier_benchmark -s 127.0.0.1 -c 30 -d 1024  --threads=6 --ratio=0:1 --test-time=60 -p 6378
ALL STATS
============================================================================================================================
Type         Ops/sec     Hits/sec   Misses/sec    Avg. Latency     p50 Latency     p99 Latency    p100 Latency       KB/sec
----------------------------------------------------------------------------------------------------------------------------
Sets            0.00          ---          ---             ---             ---             ---             ---         0.00
Gets       140989.91    140989.91         0.00         1.27643         1.24700         1.68700         3.43900    710992.29
Waits           0.00          ---          ---             ---             ---             ---             ---          ---
Totals     140989.91    140989.91         0.00         1.27643         1.24700         1.68700         3.43900    710992.29
```

+ 30连接、6 线程、60s、5120字节

```bash
$ memtier_benchmark -s 127.0.0.1 -c 30 -d 5120  --threads=6 --ratio=1:0 --test-time=60 -p 6378
ALL STATS
============================================================================================================================
Type         Ops/sec     Hits/sec   Misses/sec    Avg. Latency     p50 Latency     p99 Latency    p100 Latency       KB/sec
----------------------------------------------------------------------------------------------------------------------------
Sets       142792.65          ---          ---         1.25991         1.23100         1.78300         3.56700    720780.49
Gets            0.00         0.00         0.00             ---             ---             ---             ---         0.00
Waits           0.00          ---          ---             ---             ---             ---             ---          ---
Totals     142792.65         0.00         0.00         1.25991         1.23100         1.78300         3.56700    720780.49

$ memtier_benchmark -s 127.0.0.1 -c 30 -d 5120  --threads=6 --ratio=0:1 --test-time=60 -p 6378
ALL STATS
============================================================================================================================
Type         Ops/sec     Hits/sec   Misses/sec    Avg. Latency     p50 Latency     p99 Latency    p100 Latency       KB/sec
----------------------------------------------------------------------------------------------------------------------------
Sets            0.00          ---          ---             ---             ---             ---             ---         0.00
Gets       142354.67    142354.67         0.00         1.26416         1.23900         1.67100         3.47100    717874.57
Waits           0.00          ---          ---             ---             ---             ---             ---          ---
Totals     142354.67    142354.67         0.00         1.26416         1.23900         1.67100         3.47100    717874.57
```
